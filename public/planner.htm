<!DOCTYPE html>
<html>
<head>
<title>Smart Study Planner</title>
<link rel="stylesheet" href="css/planner.css">

<style>
body{
  font-family: Arial;
  margin: 20px;
}

.task{
  border:1px solid #ccc;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
}

.done{
  text-decoration: line-through;
  color: green;
}

button{
  padding:6px 10px;
  margin-top:5px;
  cursor:pointer;
}
</style>
</head>

<body>

<h2>Smart Study Planner</h2>

<input id="subject" placeholder="Subject">
<input id="chapter" placeholder="Chapter">
<input type="datetime-local" id="time">
<button onclick="addTask()">Add Task</button>

<h3>ğŸ… Pomodoro Timer</h3>
<div id="timer">25:00</div>
<button onclick="startPomodoro()">Start Focus</button>
<div id="breakTip"></div>

<h3>ğŸ“Š Study Performance Score</h3>
<div id="score">Score: 0 / 100</div>

<h3>Tasks</h3>
<div id="tasks"></div>

<script>

let tasks = [];
let pomodoro = 0;
let timer;
let timeLeft = 1500;

// DOM Elements
const tasksDiv = document.getElementById('tasks');
const timerDiv = document.getElementById('timer');
const scoreDiv = document.getElementById('score');
const breakTip = document.getElementById('breakTip');

const subject = document.getElementById('subject');
const chapter = document.getElementById('chapter');
const time = document.getElementById('time');


// Add Task
function addTask(){

  if(!subject.value || !chapter.value){
    alert("Please enter Subject and Chapter");
    return;
  }

  tasks.push({
    subject: subject.value,
    chapter: chapter.value,
    time: time.value,
    done: false
  });

  subject.value="";
  chapter.value="";
  time.value="";

  render();
}


// Render Tasks
function render(){
  tasksDiv.innerHTML="";

  tasks.forEach((t,i)=>{
    tasksDiv.innerHTML += `
      <div class="task ${t.done?'done':''}">
        <b>${t.subject}</b> - ${t.chapter}<br>
        ${t.time}<br>
        <button onclick="doneTask(${i})">Done</button>
      </div>
    `;
  });
}


// Mark Done
function doneTask(i){
  tasks[i].done = true;
  calculateScore();
  render();
}


// Pomodoro Timer
function startPomodoro(){

  clearInterval(timer);
  timeLeft = 1500;

  timer = setInterval(()=>{
    timeLeft--;

    let minutes = Math.floor(timeLeft/60);
    let seconds = timeLeft%60;

    timerDiv.innerText =
      minutes + ":" + seconds.toString().padStart(2,"0");

    if(timeLeft <= 0){
      clearInterval(timer);
      pomodoro++;
      showBreak();
      calculateScore();
      alert("Focus Completed!");
    }

  },1000);
}


// Score Calculation
function calculateScore(){
  let done = tasks.filter(t=>t.done).length;
  let score = Math.min(100, done*20 + pomodoro*10);
  scoreDiv.innerText = "Score: " + score + " / 100";
}


// Break Tips
const breaks = ["Drink Water ğŸ’§","Stretch ğŸ§˜","Rest Eyes ğŸ‘€","Walk ğŸš¶"];

function showBreak(){
  breakTip.innerText =
    breaks[Math.floor(Math.random()*breaks.length)];
}

</script>

</body>
</html>